name: "0Chain System Tests"
on:
  push:
  workflow_dispatch:

jobs:
  system-tests:
    name: "System Tests"
    runs-on: [ tests-suite ]
    timeout-minutes: 90
    steps:
      - name: "Setup Go"
        uses: actions/setup-go@v3
        with:
          go-version: 1.18

      - name: "Config: Run tests against existing 0Chain network"
        shell: 'script --return --quiet --command "bash {0}"'
        run: |
          rm -rf *
          wget https://github.com/ansilove/ansigo/archive/refs/heads/master.zip
          unzip master.zip
          cd ansigo-master
          GO111MODULE=off go build ./...
          mv ansigo-master ansigo
          RED='\033[0;31m'
          NC='\033[0m'
          echo -e "This ${RED}should be coloured${NC} this should not be" | tee file.ansi
          ./ansigo ../file.ansi  
          rm -rf *
          

      - name: "Archive API Test Config & Console Output"
        uses: actions/upload-artifact@v3
        with:
         name: file.ansi.png
         path: |
           ./file.ansi.png
