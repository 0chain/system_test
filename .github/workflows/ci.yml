name: "0Chain System Tests"
on:
  push:
  workflow_dispatch:

jobs:
  system-tests:
    name: "System Tests"
    runs-on: [ tests-suite ]
    timeout-minutes: 90
    steps:
      - name: "Config: Run tests against existing 0Chain network"
        run: |
          rm -rf *
          echo "^[[34mtest^[[39;49m^[[0m" > test.ansi
          sudo apt update
          sudo sudo apt install -y imagemagick
          sed -i "/.*<policy *domain=\"path\" *rights=\"none\" *pattern=\"@\*\" *\/>.*/d" /etc/ImageMagick-6/policy.xml
          cat 'after' 
          cat /etc/ImageMagick-6/policy.xml
          ls -l --color=always
          ls -l --color=always | convert label:@- output.png
          

      - name: "Archive API Test Config & Console Output"
        uses: actions/upload-artifact@v3
        with:
         name: output.png
         path: |
          ./output.png
